import 'package:core_module/core/def/global_def.dart';
import 'package:core_module/core/extensions/int_extension.dart';
import 'package:core_module/core_module.dart';
import 'package:core_module/core_ui/widgets/asset_image_widget.dart';
import 'package:core_module/core_ui/widgets/bottom_sheet_widget.dart';
import 'package:core_module/core_ui/widgets/button_widget.dart';
import 'package:flutter/material.dart';
import 'package:student_union/core-ui/screen/base_web.dart';
import 'package:student_union/core/base/base_controller.dart';
import 'package:student_union/core/model/local/web_model.dart';
import 'package:student_union/core/res/asset_path.dart';
import 'package:student_union/screens/auth/login/login_screen.dart';
import 'package:student_union/screens/dashboard/more/about/about_screen.dart';
import 'package:student_union/screens/dashboard/more/profile/ui/profile_screen.dart';
import 'package:student_union/screens/dashboard/more/settings/ui/settings_screen.dart';
import 'package:url_launcher/url_launcher.dart';

class MoreController extends BaseController {
  // RxString profilePic =
  //     "https://images.pexels.com/photos/771742/pexels-photo-771742.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500"
  //         .obs;

  void onEditProfileOnClick() {
    navUtils.fireTarget(ProfileScreen());
  }

  void onSettingsOnClick() {
    navUtils.fireTarget(SettingsScreen());
  }

  void onLogOutOnClick(BuildContext context) {
    BottomSheetWidget(
      context: context,
      height: appDimen.screenHeight * 0.4,
      title: "Log Out",
      subChild: Padding(
        padding: EdgeInsets.all(10.dp()),
        child: Column(
          children: [
            AssetImageWidget(
              asset: icWarn,
              height: 80.dp(),
              width: 80.dp(),
            ),
            Gap(30.dp()),
            Text(
              "Are you sure you want to log Out?",
              style: Theme.of(context).textTheme.bodySmall,
            ),
            Gap(30.dp()),
            ButtonWidget(
              onTap: () {
                navUtils.fireTargetOff(LoginScreen());
              },
              backgroundColor: Theme.of(context).colorScheme.error,
              text: "Log Out",
            )
          ],
        ),
      ),
    );
  }

  Future<void> onReadBibleOnClick(v) async {
    final youVersionScheme = Uri.parse('youversion://');
    if (await canLaunchUrl(youVersionScheme)) {
      await launchUrl(youVersionScheme);
    } else {
      navUtils.fireTarget(
        BaseWebView(
            model: WebModel(
          url: "https://www.bible.com/bible/111/JHN.1.NIV",
          title: "Read Bible",
        )),
      );
    }
  }

  void onCounsellingOnClick(v) {
    navUtils.fireTarget(
      BaseWebView(
          model: WebModel(
        url: "https://tawk.to/socialmediamissionary",
        title: "Counselling & Prayers",
      )),
    );
  }

  void onAboutOnClick() {
    navUtils.fireTarget(AboutScreen());
  }
}
